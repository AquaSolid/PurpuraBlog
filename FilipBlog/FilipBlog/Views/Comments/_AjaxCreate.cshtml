@using Microsoft.AspNet.Identity
@model FilipBlog.Models.Comment

@*
    <div class="form-horizontal">
        <h4>Comment</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Content, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Content, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Content, "", new { @class = "text-danger" })
            </div>
        </div>
        @Html.HiddenFor(model => model.CommenterRefId, new { Value = User.Identity.GetUserId() })
        @Html.HiddenFor(model => model.DateOfCreation, new { Value = DateTime.Now })
        @Html.HiddenFor(model => model.DateOfModification, new { Value = DateTime.Now })

        @Html.HiddenFor(model => model.Post_PostId)

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">

                </button>
            </div>
        </div>
    </div>
*@


@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/bootstrap")

<input type="text" id="commentContent" value="" />
<button id="createComment" data-url='@Url.Action("ShowComments","Posts", new {postId = Model.Post_PostId } )'>Create</button>

@*<button id="createComment" data-url='@Url.Action("ShowComment","Comments")'>Create</button>*@

<input type="text" id="commentPostId" hidden="hidden" value=@Model.Post_PostId />

<script type="text/javascript">
    $("#createComment").on("click", function () {


        var newComment = {
            Content: $("#commentContent").val(),

            Post_PostId: $("#commentPostId").val()

        };
        $.ajax({
            url: '/api/CommentsApi',
            type: 'POST',
            data: JSON.stringify(newComment),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                refreshComments();


            },
            error: function (data) {
                //alert("POST error");
                refreshComments();
            }
        });


    })
</script>














@section scripts {
    @Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js")
}